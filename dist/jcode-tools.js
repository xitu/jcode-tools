(()=>{var M=Object.defineProperty;var R=(o,e)=>{for(var t in e)M(o,t,{get:e[t],enumerable:!0})};var j={};R(j,{CodeXClient:()=>b,Storage:()=>w,getCustomCode:()=>x,getURL:()=>W,logger:()=>T});var x=async()=>{let o;do{if(o=document.querySelector("body>script:last-of-type"),o&&/^text\/.*/.test(o.type))return o.textContent;await new Promise(e=>setTimeout(e,50))}while(1)};function I(o){return new Promise((e,t)=>{try{let r=new WebSocket(o);r.addEventListener("message",c=>{let s=JSON.parse(c.data);s.type==="init"&&(r.clientID=s.message),e(r)})}catch(r){t(r.message)}})}function J(){let o,e,t=new Promise((r,c)=>{o=r,e=c});return{resolve:o,reject:e,promise:t}}var _="https://codex.juejin.fun",H="wss://ws.juejin.fun",b=class{constructor(e=_,t=H){this.url=e,this.wsURL=t,this.socket=null,this.onmessage=null,this.onerror=null,this.socketReady=J()}async input(e){await this.socketReady.promise,this.socket.send(JSON.stringify({type:"stdin",message:e}))}async runCode({code:e,language:t,input:r,timeout:c=8}={}){e||(e=await x()),t==null&&(t=document.querySelector("body>script:last-of-type").type.split("/")[1]),t==="node"&&(t="js"),t==="perl"&&(t="pl"),t==="python"&&(t="py"),t==="golang"&&(t="go"),t==="ruby"&&(t="rb"),t==="rust"&&(t="rs"),t==="csharp"&&(t="cs");let s={code:e,language:t,input:r,timeout:c},f={method:"POST",headers:{"Content-Type":"application/json"}};try{return this.socket||(this.socket=await I(this.wsURL),this.socket.addEventListener("message",n=>{let l=JSON.parse(n.data);l.type==="ready"?this.socketReady.resolve():l.type==="stdout"?this.onmessage&&this.onmessage(l.message):l.type==="stderr"&&this.onerror&&this.onerror(l.message)})),this.socket&&(s.wsID=this.socket.clientID),f.body=JSON.stringify(s),await(await fetch(this.url,f)).json()}catch(u){this.socket&&this.socket.close(),this.socket=null,console.error(u)}}};typeof BigInt=="function"&&!BigInt.prototype.toJSON&&(BigInt.prototype.toJSON=function(){return`${this}n`});function E(o,e,t,r){o[e]=o[e]||[],o[e][r]=t}function A(o){let e={};if(o){let t=0,r=Object.keys(o).every(c=>c===Number(c).toString());for(let[c,s]of Object.entries(o))if(typeof s!="function"){if(E(e,"(index)",r?Number(c):c,t),s==null||typeof s!="object"||s instanceof RegExp)E(e,"Value",s,t);else for(let[f,u]of Object.entries(s))E(e,f,u,t);t++}return e}return o}function U(o,e){let t=o["(index)"].length;if(t){let r=document.createElement("table"),c=document.createElement("thead");r.appendChild(c),r.className="jcode-logger__table";let s=Object.keys(o);e&&(s=s.filter(i=>i==="(index)"||i==="Value"||e.includes(i)));let f=document.createElement("tr");f.innerHTML=s.map((i,n)=>`<th data-index="${n}">${i}</th>`).join(""),c.appendChild(f);let u=document.createElement("tbody");r.appendChild(u);for(let i=0;i<t;i++){let n=document.createElement("tr");u.appendChild(n);for(let l=0;l<s.length;l++){let a=s[l],d=document.createElement("td");if(i in o[a]){let p=o[a][i];typeof p=="string"&&a!=="(index)"&&(p=`'${p}'`),Array.isArray(p)?p.length>3&&(d.textContent=`${p.slice(0,3)}... (total: ${p.length})`):typeof p=="bigint"?d.textContent=`${p}n`:typeof p=="symbol"?d.textContent=p.toString():d.textContent=p,d.className=k(p).toLowerCase()}n.appendChild(d)}}return r}}function L(o){return Object.prototype.toString.call(o)==="[object Object]"?JSON.stringify(o):o}function O(o){let e=L(o[0]),t=[],r=/%[cdfios]/,c=0;for(let s=1;s<o.length;s++){let f=L(o[s]);if(r.test(e))e=e.replace(r,u=>{if(u==="%c"){let i=`${c?"</span>":""}<span style="${f}">`;return c++,i}if(u==="%d"||u==="%i")return parseInt(f,10);if(u==="%f")return parseFloat(f);if(u==="%s")return f.toString();if(u==="%o")return JSON.stringify(f)});else{t.push(...o.slice(s).map(L));break}}return t=[e,...t],c&&t.push("</span>"),t}function k(o){return Object.prototype.toString.call(o).slice(8,-1)}function v(o,e=0){let t=document.createElement("ul");t.className="jcode-logger__dir";let r=k(o),c=document.createElement("div");c.textContent=o instanceof HTMLElement?o.tagName.toLowerCase():r,c.addEventListener("click",()=>{c.classList.toggle("expand")}),t.appendChild(c);let s=[];for(let f in o)typeof o[f]!="function"&&s.push([f,o[f]]);Array.isArray(o)&&s.push(["length",o.length]),s.sort((f,u)=>f[0]>u[0]?1:f[0]<u[0]?-1:0);for(let f=0;f<s.length;f++){let[u,i]=s[f];typeof i=="string"&&(i=`"${i}"`);let n=document.createElement("li"),l=document.createElement("em");l.textContent=u;let a=document.createElement("span");if(a.className=k(i).toLowerCase(),Array.isArray(i)&&i.length<=0?a.textContent="Array(0)":i instanceof NodeList?a.textContent=`NodeList(${i.length})`:i instanceof HTMLCollection?a.textContent=`HTMLCollection(${i.length})`:i instanceof DOMTokenList?a.textContent=`DOMTokenList(${i.length})`:i instanceof HTMLElement?a.textContent=`${i.tagName.toLowerCase()}${i.id?`#${i.id}`:""}`:a.textContent=i,e<2&&i&&typeof i=="object"&&!(i instanceof Window)){let d=v(i,e+1);d.children[0].innerHTML="",d.children[0].appendChild(l),d.children[0].appendChild(a),n.appendChild(d)}else n.appendChild(l),n.appendChild(a);t.appendChild(n)}return t}var P={log:console.log,info:console.info,warn:console.warn,error:console.error,dir:console.dir,table:console.table,group:console.group,groupCollapsed:console.groupCollapsed,groupEnd:console.groupEnd,count:console.count,countReset:console.countReset,time:console.time,timeEnd:console.timeEnd,assert:console.assert,clear:console.clear},T=(o,e=P)=>{let t=document.createElement("div");t.className="jcode-logger",o.append(t);let r=(n,l="info")=>{let a=document.createElement("pre");a.className=`jcode-logger__${l}`,a.innerHTML=n,t.appendChild(a)},c=n=>(...l)=>{e&&e[n](...l),l=O(l);let a=l.map(d=>d==null?String(d):d.toString?d.toString():Object.prototype.toString.call(d)).join(" ");r(a,n)},s=[],f=(n,l=!1)=>{let a=document.createElement("div");a.className="jcode-logger__group",t.appendChild(a);let d=document.createElement("div");d.textContent=n,l||(d.className="expand"),a.appendChild(d),d.addEventListener("click",()=>{d.classList.toggle("expand")}),s.push(t),t=a},u={},i={};return{log:c("log"),info:c("info"),warn:c("warn"),error:c("error"),assert:(n,...l)=>{if(e&&e.assert(n,...l),!n){let a=O(l).join(" ");r(`Assertion failed: ${a}`,"error")}},clear:()=>{e&&e.clear(),s.length>0&&(t=s[0],s.length=0),t.innerHTML=""},group:n=>{e&&e.group(n),f(n)},groupCollapsed:n=>{e&&e.groupCollapsed(n),f(n,!0)},groupEnd:()=>{e&&e.groupEnd(),s.length>0&&(t=s.pop())},count:(n="default")=>{e&&e.count(n),n=n.toString(),u[n]=u[n]||0,u[n]++,r(`${n}: ${u[n]}`)},time:(n="default")=>{e&&e.time(n),n=n.toString(),n in i?r(`Timer '${n}' already exists`,"warn"):i[n]=performance.now()},countReset:(n="default")=>{e&&e.countReset(n),n=n.toString(),n in u?delete u[n]:r(`Count for '${n}' does not exist`,"warn")},timeEnd:(n="default")=>{e&&e.timeEnd(n),n=n.toString(),n in i?(r(`${n}: ${performance.now()-i[n]} ms`),delete i[n]):r(`Timer '${n}' does not exist`,"warn")},dir:n=>{e&&e.dir(n);let l=v(n);t.appendChild(l)},table:(n,l)=>{e&&e.table(n,l);let a=A(n),d=U(a,l);d.addEventListener("click",p=>{let h=p.target;if(h.tagName==="TH"){let $=Number(h.dataset.index),S=[...d.querySelectorAll("tr")].slice(1);S.sort((m,g)=>{m=m.children[$],g=g.children[$];let y=m.textContent,C=g.textContent;return m.className==="number"&&(y=Number(y)),g.className==="number"&&(C=Number(C)),m.className==="bigint"&&(y=BigInt(y.slice(0,-1))),g.className==="bigint"&&(C=BigInt(C.slice(0,-1))),y>C?h.dataset.sort==="asc"?-1:1:y<C?h.dataset.sort==="asc"?1:-1:0}),S.forEach(m=>{d.appendChild(m)}),h.dataset.sort=h.dataset.sort==="asc"?"desc":"asc"}}),t.appendChild(d)}}};function B(o,e=13977641){let t=3735928559^e,r=1103547991^e;for(let c=0,s;c<o.length;c++)s=o.charCodeAt(c),t=Math.imul(t^s,2654435761),r=Math.imul(r^s,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}var N="https://kv.juejin.fun",w=class{constructor(e=B(location.href)){this.bucket=e}async get(e){let r=await(await fetch(`${N}/doc/${e}`,{method:"GET",headers:{"X-Project-Id":this.bucket}})).json();return this.result=r,r.error?null:r.result.value}async set(e,t){let c=await(await fetch(`${N}/doc/append/${e}`,{method:"POST",headers:{"X-Project-Id":this.bucket},body:JSON.stringify({value:t})})).json();return this.result=c,!c.error}async del(e){let r=await(await fetch(`${N}/doc/${e}`,{method:"DELETE",headers:{"X-Project-Id":this.bucket}})).json();return this.result=r,!r.error}};function D(o){let e=new Blob([o],{type:"text/javascript"});return URL.createObjectURL(e)}var W=async()=>{let o=await x();return D(o)};window.JCode=window.JCode||j;})();
