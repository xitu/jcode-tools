(()=>{typeof BigInt=="function"&&!BigInt.prototype.toJSON&&(BigInt.prototype.toJSON=function(){return`${this}n`});window.JCode=window.JCode||{};function b(e,t,o,l){e[t]=e[t]||[],e[t][l]=o}function y(e){let t={};if(e){let o=0,l=Object.keys(e).every(s=>s===Number(s).toString());for(let[s,n]of Object.entries(e))if(typeof n!="function"){if(b(t,"(index)",l?Number(s):s,o),typeof n!="object"||n instanceof RegExp)b(t,"Value",n,o);else for(let[c,r]of Object.entries(n))t[c]=t[c]||[],t[c][o]=r;o++}return t}return e}function h(e,t){let o=e["(index)"].length;if(o){let l=document.createElement("table"),s=document.createElement("thead");l.appendChild(s),l.className="jcode-logger__table";let n=Object.keys(e);t&&(n=n.filter(a=>a==="(index)"||a==="Value"||t.includes(a)));let c=document.createElement("tr");c.innerHTML=n.map((a,u)=>`<th data-index="${u}">${a}</th>`).join(""),s.appendChild(c);let r=document.createElement("tbody");l.appendChild(r);for(let a=0;a<o;a++){let u=document.createElement("tr");r.appendChild(u);for(let f=0;f<n.length;f++){let p=n[f],d=document.createElement("td");if(a in e[p]){let i=e[p][a];typeof i=="string"&&p!=="(index)"&&(i=`'${i}'`),Array.isArray(i)?i.length>3&&(d.innerHTML=`${i.slice(0,3)}... (total: ${i.length})`):typeof i=="bigint"?d.innerHTML=`${i}n`:typeof i=="symbol"?d.innerHTML=i.toString():d.innerHTML=i,d.className=Object.prototype.toString.call(i).slice(8,-1).toLowerCase()}u.appendChild(d)}}return l}}JCode.getCustomCode=async()=>{let e;do{if(e=document.querySelector("body>script:last-of-type"),e&&/^text\/.*/.test(e.type))return e.textContent;await new Promise(t=>setTimeout(t,50))}while(1)};function C(e){let t=e[0],o=[],l=/%[cdfios]/,s=0;for(let n=1;n<e.length;n++){let c=e[n];if(l.test(t))t=t.replace(l,r=>{if(r==="%c"){let a=`${s?"</span>":""}<span style="${c}">`;return s++,a}if(r==="%d"||r==="%i")return parseInt(c,10);if(r==="%f")return parseFloat(c);if(r==="%s")return c.toString();if(r==="%o")return JSON.stringify(c)});else{o.push(...e.slice(n));break}}return o=[t,...o],s&&o.push("</span>"),o}var N={log:console.log,warn:console.warn,error:console.error,table:console.table};JCode.logger=(e,t=N)=>{let o=document.createElement("div");o.className="jcode-logger",e.append(o);let l=s=>(...n)=>{t&&t[s](...n),n=C(n);let c=n.join(" "),r=document.createElement("pre");r.className=`jcode-logger__${s}`,r.innerHTML=c,o.appendChild(r)};return{log:l("log"),warn:l("warn"),error:l("error"),table:(s,n)=>{t.table(s,n);let c=y(s),r=h(c,n);r.addEventListener("click",a=>{let u=a.target;if(u.tagName==="TH"){let f=Number(u.dataset.index),p=[...r.querySelectorAll("tr")].slice(1);p.sort((d,i)=>{d=d.children[f],i=i.children[f];let m=d.textContent,g=i.textContent;return d.className==="number"&&(m=Number(m)),i.className==="number"&&(g=Number(g)),d.className==="bigint"&&(m=BigInt(m.slice(0,-1))),i.className==="bigint"&&(g=BigInt(g.slice(0,-1))),m>g?u.dataset.sort==="asc"?-1:1:m<g?u.dataset.sort==="asc"?1:-1:0}),p.forEach(d=>{r.appendChild(d)}),u.dataset.sort=u.dataset.sort==="asc"?"desc":"asc"}}),o.appendChild(r)}}};})();
